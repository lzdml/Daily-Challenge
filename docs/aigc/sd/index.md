### 什么是 SD

- `Stable Diffusion` 是一款强大的 AI 绘画软件，使用先进的生成对抗网络（GAN）模型学习和模仿艺术家的创作风格，帮助用户快速创建高品质的 AI 绘画作品

### 参数解释

---

1.  **`提示词(prompt)`和`反向提示词(negative prompt)`**
    - `提示词`内输入的东西是你`想要`画的东西, `反向提示词`内输入的就是你`不想要`画的东西

::: danger
一般负面提示为一些不好的如: `lowers`, `error`, `cropped`, `worst quality`, `low quality`, `jpeg artifacts`, `out of frame`, `watermark`, `signature`
:::

1.1 **人物肖像的负面提示**
::: danger
`中文`  
变形、丑陋、残缺、毁容、文本、额外的四肢、面部切割、头部切割、额外的手指、额外的手臂、绘制不佳的脸、突变、比例不良、头部裁剪、四肢畸形、手突变、融合手指、长脖子

`英文`  
deformed, ugly, mutilated, disfigured, text, extra limbs, face cut, head cut, extra fingers, extra arms, poorly drawn face, mutation, bad proportions, cropped head, malformed limbs, mutated hands, fused fingers, long neck
:::

![](/assets/negative-prompt.jpg)

### steps(采样迭代步数)

- `Stable-Diffusion` 通过从充满噪点的画布开始创建图像，然后逐渐去噪以达到最终输出。Steps 就是控制这些去噪步骤的数量。通常，越高越好，但一般情况下，我们使用的默认值是 `20-28` 个步骤，这其实已经足以生成任何类型的图像。

- 如果你正在创建带有毛皮或任何具有详细纹理的主题的面部或动物，并且觉得生成的图像缺少其中一些细节，请尝试将其提高到`40`或者更高
- 而且，使用改进的快速采样器（如 DDIM 和 DPM++系列）一般用 100 以内的步数就完全 OK 了，**`通过对这些采样器使用大量步骤，很可能只会浪费时间和 GPU 算力，而不会提高图像质量`**。

![不同的steps展示的不同的图片](/assets/image-82.webp)
![](/assets/step.jpg)

---

### 采样器

| 采样器          | 速度 | 质量 | 内存需求 | 使用场景               |
| --------------- | ---- | ---- | -------- | ---------------------- |
| DPM++ 2M Karras | 慢   | 最好 | 高       | 追求最高图像质量       |
| Euler a         | 最快 | 一般 | 低       | 需要快速批量生成时     |
| LMS             | 快   | 较好 | 高       | 平衡速度和质量         |
| Heun            | 中等 | 较好 | 高       | 很少使用               |
| DPM2            | 快   | 较好 | 中       | 平衡速度和质量         |
| DPM             | 中等 | 良好 | 中       | 追求质量但速度不能太慢 |
| PLMS unipc      | 快   | 一般 | 中       | 需要快速生成时         |

- **`主要区别`**

  - `DPM++ 2M Karras` 质量`最好`,但`速度慢`,需要`更多显存`
  - `Euler a` `速度最快,质量一般`
  - `LMS、DPM2` `在速度和质量之间求平衡`
  - `DPM` ` 质量好但速度不如`` LMS  `和 `DPM2`
  - `PLMS` `unipc` `生成快但质量比较差`

- **`使用场景`**

  - 追求`质量`时选 `DPM++ 2M Karras`
  - 需要`批量`和`快速生成`选 `Euler a`
  - `平衡速度和质量`选 `LMS` 或 `DPM2`
  - `资源有限`但要`相对好的质量`可以选 `DPM`

- **`查找资料之后个人认为不同的采样器需要的显卡配置`**

| 采样器          | 最低显卡配置                     | 其他           |
| --------------- | -------------------------------- | -------------- |
| DPM++ 2M Karras | Nvidia RTX 2080 Super, 12GB VRAM | 个人愚见, 勿喷 |
| LMS             | Nvidia GTX 1080, 8GB VRAM        | 个人愚见, 勿喷 |
| DPM2            | Nvidia GTX 1080, 8GB VRAM        | 个人愚见, 勿喷 |
| DPM             | Nvidia GTX 1080, 8GB VRAM        | 个人愚见, 勿喷 |
| PLMS unipc      | Nvidia GTX 1060, 6GB VRAM        | 个人愚见, 勿喷 |
| Euler a         | Nvidia GTX 1060, 6GB VRAM        | 个人愚见, 勿喷 |
| Euler           | Nvidia GTX 1060, 6GB VRAM        | 个人愚见, 勿喷 |

- **`主要的最低配置要求包括`**

  - `DPM++ 2M Karras` 需要较高的 `12GB` 显存,及 RTX 2080 Super 级别显卡
  - `LMS、DPM2、DPM` 需要 `GTX 1080` `8GB` 显卡
  - `PLMS unipc、Euler a、Euler` 只需要 `GTX 1060` `6GB` 显卡

- **`以下的不同的采样器生成的图片`**

<global-image />

---

### 提示词引导系数(CFG Scale)

| CFG Scale 值 | 效果                     | 使用场景                       | 其他           |
| ------------ | ------------------------ | ------------------------------ | -------------- |
| 100          | 强制遵循提示词           | 生成严格符合提示要求的图片     | 个人愚见, 勿喷 |
| 50           | 强制遵循提示词           | 生成严格符合提示要求的图片     | 个人愚见, 勿喷 |
| 20-30        | 强制遵循提示词           | 生成严格符合提示要求的图片     | 个人愚见, 勿喷 |
| 10-20        | 提示词有很强的引导作用   | 生成基本符合提示要求的图片     | 个人愚见, 勿喷 |
| 1-10         | 有提示词的 moderate 引导 | 允许对提示词进行合理扩展和解读 | 个人愚见, 勿喷 |
| 0-1          | 基本忽略提示词           | 给模型更大的创意自由空间       | 个人愚见, 勿喷 |

- **`以下的不同的提示词引导系数生成的图片`**

<global-image :list="[6,8,10,12,14,20]" />

---

### 图像生成种子(Seed)

| 作用         | 说明                                                                |
| ------------ | ------------------------------------------------------------------- |
| 影响生成结果 | 不同的 Seed 值会导致生成不同的随机数,使同一 prompt 生成不同样式图片 |
| 增加多样性   | 尝试不同的 Seed 值可以增加生成图片的多样性                          |
| 固定结果     | 保持 Seed 固定可以重复生成高度相似的图片                            |
| 调优提示词   | 调整 Seed 是优化生成结果的常用技巧之一                              |
| 初始化模型   | Seed 决定了模型初始化时使用的随机数序列                             |

| 用法       | 场景                        |
| ---------- | --------------------------- |
| 1-100      | 间整数 希望增加图片多样性   |
| 默认随机   | 首次生成时通常使用随机 Seed |
| 固定指定值 | 需要重复生成某张图片        |
| 多值尝试   | 调试某个 prompt 的最佳效果  |

| 须知                   | ---                                 |
| ---------------------- | ----------------------------------- |
| 对不同 prompt 影响不同 | 部分 prompt 更受 Seed 影响,部分稳定 |
| 合理运用确定性与随机性 | 提高生成效果的关                    |

---


- **`总结`**  
  - `尺度Scale`控制图像生成的细节程度。值越大,图片包含的细节越丰富。
  - `迭代次数Steps`表示进行图像生成的循环迭代次数。次数越多,图像质量potentially越高。


- **`参考文献`**

- [how-stable-diffusion-work](https://stable-diffusion-art.com/how-stable-diffusion-work/)
